<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.35">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 20.0px Monaco; min-height: 27.0px}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 33.0px Monaco}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 26.0px Monaco; min-height: 35.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 26.0px Monaco}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 17.0px Monaco}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 19.0px Monaco; min-height: 26.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 19.0px Monaco}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco; min-height: 19.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 20.0px Monaco}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Monaco; min-height: 25.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Monaco}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #cd1713}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Monaco; min-height: 21.0px}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco; color: #102ac2}
span.s1 {font: 22.0px Monaco}
span.s2 {color: #102ac2}
span.s3 {font: 20.0px Monaco}
span.s4 {font: 14.0px Monaco; color: #000000}
span.s5 {font: 14.0px Monaco; color: #008325}
span.s6 {color: #000000}
span.s7 {font: 13.0px Monaco; color: #008325}
span.s8 {color: #008325}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><br></p>
<p class="p1"><br></p>
<p class="p1"><br></p>
<p class="p1"><br></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Genetic Algorithms<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>and Live Evolution</p>
<p class="p3"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Dan Stowell</p>
<p class="p5"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>www.mcld.co.uk</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>SuperCollider symposium, Birmingham, July 2006</p>
<p class="p8"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p10">Outline</p>
<p class="p11"><br></p>
<p class="p12"><span class="Apple-converted-space"> </span>- Intro: Genetic Algorithms</p>
<p class="p12"><span class="Apple-converted-space"> </span>- Implementation</p>
<p class="p12"><span class="Apple-converted-space"> </span>- GA for live audio</p>
<p class="p12"><span class="Apple-converted-space"> </span>- Creating an arbitrary synth</p>
<p class="p12"><span class="Apple-converted-space"> </span>- Applications</p>
<p class="p12"><span class="Apple-converted-space">     </span>- Targeted synth generation</p>
<p class="p12"><span class="Apple-converted-space">     </span>- Live performance tool (IGA)</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p10">Introduction: Genetic Algorithms</p>
<p class="p13">Evolution by natural selection requires:</p>
<p class="p9"><br></p>
<p class="p13"><span class="Apple-converted-space"> </span>- Variation</p>
<p class="p13"><span class="Apple-converted-space"> </span>- Transmission</p>
<p class="p13"><span class="Apple-converted-space"> </span>- Selection</p>
<p class="p9"><br></p>
<p class="p13">Can be generalised beyond biology, e.g. to computer-based scenarios.</p>
<p class="p9"><br></p>
<p class="p13">Can be used to solve design problems (a type of stochastic search).<span class="Apple-converted-space"> </span></p>
<p class="p9"><br></p>
<p class="p13">Which problems is it useful for? Problems in which evaluating a given solution is (relatively) easy, but specifying an optimal solution in advance is difficult.</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p10">Implementation</p>
<p class="p9"><br></p>
<p class="p13">Object-oriented implementation.</p>
<p class="p9"><br></p>
<p class="p13">"GAIndividual" class:</p>
<p class="p13"><span class="Apple-converted-space"> </span>- "genome" (typically an array of floats, 0.0 - 1.0)</p>
<p class="p13"><span class="Apple-converted-space"> </span>- way to convert genome to phenome (e.g. blue-or-green eyes)</p>
<p class="p13"><span class="Apple-converted-space"> </span>- routine for mating (includes genetic variation)</p>
<p class="p9"><br></p>
<p class="p13">"GAIsland" (population) class:</p>
<p class="p13"><span class="Apple-converted-space"> </span>- stores individuals (fixed amount)</p>
<p class="p13"><span class="Apple-converted-space"> </span>- routine for assigning a "fitness" float value to a given individual (0 == ideal)</p>
<p class="p13"><span class="Apple-converted-space"> </span>- routine for culling unfit individuals, and refilling the spaces with new offspring</p>
<p class="p9"><br></p>
<p class="p13">"GAGraphCreator" classes:</p>
<p class="p13"><span class="Apple-converted-space"> </span>- converts a linear genome to a rich UGen graph</p>
<p class="p13"><span class="Apple-converted-space"> </span>- more about this later</p>
<p class="p9"><br></p>
<p class="p13">"Judge" synths:</p>
<p class="p13"><span class="Apple-converted-space"> </span>- more about this later</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p10">GA for live audio</p>
<p class="p9"><br></p>
<p class="p13">3 parallel processes:</p>
<p class="p9"><br></p>
<p class="p13"><span class="Apple-converted-space"> </span>- Audio generation</p>
<p class="p13"><span class="Apple-converted-space"> </span>- Audio evaluation</p>
<p class="p13"><span class="Apple-converted-space"> </span>- GA cull-and-mate (periodic rather than continuous)</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p13">Audio generation takes by far the most CPU</p>
<p class="p13"><span class="Apple-converted-space"> </span>- not optimised since generated semi-randomly (e.g. superfluous UGens)</p>
<p class="p13"><span class="Apple-converted-space"> </span>- may need to run in "batches"</p>
<p class="p9"><br></p>
<p class="p13">Audio evaluation can (should) be light on CPU.<span class="Apple-converted-space"> </span></p>
<p class="p13">For live audio, this is a continuous process</p>
<p class="p13"><span class="Apple-converted-space"> </span>- judges are synths which take an individual's output as their input</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p10">Converting a genome to a phenome</p>
<p class="p9"><br></p>
<p class="p13">One traditional approach: genome == a set of parameters.</p>
<p class="p13">Appropriate if you have specific synths/patterns you want to use as a base.</p>
<p class="p9"><br></p>
<p class="p13">My main technique: genome == input to a function which iteratively creates an SC synth graph. The float values are used either to index into an array of possible UGens, or as parameters to those UGens (depending on the state of the function).</p>
<p class="p9"><br></p>
<p class="p13">We can create some random phenomes:</p>
<p class="p9"><br></p>
<p class="p13">s.boot;</p>
<p class="p13">f = GAOwnDrone.phenomeToGraphFunc(<span class="s2">GAGraphCreator2</span>.process({1.0.rand}.dup(<span class="s3">34</span>), 1, 3)).postcs.play;</p>
<p class="p14"><span class="s4">f.set(</span><span class="s5">\t_trig</span><span class="s4">, 1);</span><span class="s6"> </span>// NB The trigger input often has little effect on a randomly-created graph</p>
<p class="p13">f.free;</p>
<p class="p9"><br></p>
<p class="p15">(Footnote: The technique of creating tree-like graphs begins to overlap with "Genetic Programming", which is related to Genetic Algorithms.)</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p10">Examples/applications</p>
<p class="p9"><br></p>
<p class="p13">Subclass <span class="s2">GAIsland</span> and <span class="s2">GAIndividual</span> to derive specific application.</p>
<p class="p9"><br></p>
<p class="p13">Each application requires two things to be specified:</p>
<p class="p13">1) The "fitness function" which returns a float value for a given individual's phenome. For automated optimisation processes this will be encapsulted in a "judge synth". For user-interactive evolution, this will be allocated based on the user's expressed opinions.</p>
<p class="p13">2) A "genome-to-phenome" function (if not using the default<span class="s2"> GAGraphCreator2</span>)</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p16"><br></p>
<p class="p16"><br></p>
<p class="p10">Example: Envelope matching</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p13">Fitness function:</p>
<p class="p9"><br></p>
<p class="p13"><span class="Apple-tab-span">	</span>(Amplitude.kr(x) - EnvGen.kr(***)).abs</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p13">See SynthDef <span class="s7">\_ga_judge_ampenv</span> in GABasicJudgeSynths</p>
<p class="p9"><br></p>
<p class="p17"><span class="s2">Env</span>.new([0.001, 1, 0.3, 0.8, 0.001],[0.2,0.3,0.1,0.4],<span class="s8">'welch'</span>).test.plot</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>and the winner is...</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p13">Phenome:</p>
<p class="p9"><br></p>
<p class="p13">(</p>
<p class="p18"><span class="s6">x = {</span>|t_trig=1|<span class="s6"> [</span></p>
<p class="p13">{</p>
<p class="p13">(((0.83117133082707*<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="Apple-converted-space">  </span>(<span class="s2">Ringz</span>.ar(</p>
<p class="p13"><span class="Apple-converted-space">    </span>(<span class="s2">FBSineL</span>.ar(0.6232404823375 +1 * 1e4, -0.99531210840268+1 * 8 + 1, 1, 1.005, 0.7)).clip2(1),10**(</p>
<p class="p13"><span class="Apple-converted-space">    </span>(<span class="s2">EnvGen</span>.ar(<span class="s2">Env</span>.linen(0.2576568237213,</p>
<p class="p13"><span class="Apple-converted-space">         </span>0.25602666668017,</p>
<p class="p13"><span class="Apple-converted-space">         </span>0.47863558583985,</p>
<p class="p13"><span class="Apple-converted-space">         </span>0.79770049902396,</p>
<p class="p13"><span class="Apple-converted-space">         </span>0.28524021071039*8-4), t_trig)).clip2(1)+1)*50,-0.56978517251259+1.01,</p>
<p class="p13"><span class="Apple-converted-space">    </span>(<span class="s2">EnvGen</span>.ar(<span class="s2">Env</span>.perc(0.1* 0.88386771683367,</p>
<p class="p13"><span class="Apple-converted-space">         </span>0.88548732419986,</p>
<p class="p13"><span class="Apple-converted-space">         </span>0.67333083336055,</p>
<p class="p13"><span class="Apple-converted-space">         </span>0.82631505928344*8-4), t_trig)).clip2(1),</p>
<p class="p9"><span class="Apple-converted-space">       </span></p>
<p class="p13"><span class="Apple-converted-space">    </span>(<span class="s2">EnvGen</span>.ar(<span class="s2">Env</span>.perc(0.47281228042551,</p>
<p class="p13"><span class="Apple-converted-space">         </span>0.47894477865687,</p>
<p class="p13"><span class="Apple-converted-space">         </span>0.3358097065771,</p>
<p class="p13"><span class="Apple-converted-space">         </span>0.02491940032389*8-4), t_trig)).clip2(1))).clip2(1)) + (0.014649599186374*<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="Apple-converted-space">  </span>(<span class="s2">SinOsc</span>.ar(10**(</p>
<p class="p13"><span class="Apple-converted-space">    </span>(<span class="s2">BPF</span>.ar(<span class="s2">PinkNoise</span>.ar,10**(<span class="s2">Dust2</span>.kr(200, 1)+1)*50,<span class="s2">Dust2</span>.kr(200, 1)*0.5 + 1,<span class="s2">PinkNoise</span>.ar,</p>
<p class="p13"><span class="Apple-converted-space">         </span><span class="s2">Dust2</span>.ar(200, 1))).clip2(1)+1)*50, 0, <span class="s2">Dust2</span>.ar(200, 1),</p>
<p class="p13"><span class="Apple-converted-space">       </span><span class="s2">PinkNoise</span>.ar)).clip2(1)))).clip2(1)}, ].mean}.play;</p>
<p class="p13">)</p>
<p class="p9"><br></p>
<p class="p13">x.free;</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p10">Creative/artistic applications</p>
<p class="p9"><br></p>
<p class="p13">Traditional "creative" GA involves user preference as the feedback function.</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p13">"Own Drone"</p>
<p class="p9"><br></p>
<p class="p13"><span class="Apple-converted-space"> </span>- Individuals' amplitudes wander</p>
<p class="p13"><span class="Apple-converted-space"> </span>- User preference applies most strongly to loudest individuals</p>
<p class="p9"><br></p>
<p class="p14">// You can use this to run GAOwnDrone.</p>
<p class="p14">// Please do increase the "channels" arg if you're on a multi-channel setup.</p>
<p class="p14">// You may need to reduce the number of individuals if your CPU has difficulty running them all.</p>
<p class="p14">// 24 individuals is a sensible amount for my 1.67 GHz G4 PowerBook.</p>
<p class="p13">s.boot;</p>
<p class="p13">i = <span class="s2">GAOwnDrone</span>.new(server:s, numinds:24, channels:2).cullProportion_(0.2).makeGui;</p>
<p class="p13">i.stop;</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
</body>
</html>
